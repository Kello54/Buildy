<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Buildy - Material Comparison</title>
<link rel="icon" href="images/favicon.png" type="image/png">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

<style>
/* ===== Global ===== */
* {margin:0; padding:0; box-sizing:border-box; font-family:Arial,sans-serif;}
body {background:#f5f5f5; color:#1f1f1f;}

/* ===== Header ===== */
header {
  display:flex; justify-content:space-between; align-items:center; padding:15px 20px;
  background:#1f2a38; border-bottom:4px solid #F39C12;
}
header .logo {display:flex; align-items:center; font-size:24px; font-weight:bold; color:#fff;}
header .logo img{height:40px;}
header .login {color:#fff; font-size:16px; padding:6px 12px; border:1px solid rgba(243,156,18,0.3); border-radius:4px; cursor:pointer;}
header .login:hover {background:rgba(243,156,18,0.2);}

/* ===== Subheader ===== */
nav.subheader {background:#1f2a38; padding:10px; text-align:center;}
nav.subheader a {color:#fff; margin:0 15px; text-decoration:none;}

/* ===== Filters ===== */
#filters {
  display:flex; flex-wrap:wrap; justify-content:center; gap:10px; padding:20px; background:#fff;
}
#filters input, #filters select {
  padding:10px; border-radius:5px; border:1px solid #ccc; font-size:16px; width:200px;
}

/* ===== Table ===== */
#comparisonTable {
  width:100%; border-collapse:collapse; margin:20px auto; background:#fff; max-width:1200px;
}
#comparisonTable th, #comparisonTable td {
  border:1px solid #ddd; padding:12px; text-align:center; vertical-align:middle;
}
#comparisonTable th {
  background:#1f2a38; color:#fff; position:sticky; top:0; z-index:2;
}
#comparisonTable th img {height:20px; vertical-align:middle; margin-right:5px;}
tr:nth-child(even){background:#f9f9f9;}
tr:hover {background:#e6f7ff;}
.highlight {background:#F39C12 !important; color:#fff; font-weight:bold;}

/* ===== Cards (Mobile) ===== */
#cardWrapper {display:none; flex-direction:column; gap:10px; padding:20px;}
.card {
  background:#1f2a38; color:#fff; border-radius:6px; padding:15px; flex-shrink:0;
}
.card h3 {margin-bottom:10px;}
.card .price-row {font-size:14px; margin:5px 0;}
.card .highlight {color:#F39C12; font-weight:bold;}

/* ===== Map ===== */
#supplierMap {height:300px; margin:20px; border:2px solid #F39C12; border-radius:6px;}

/* ===== Footer ===== */
footer {background:#1f2a38; color:#fff; text-align:center; padding:20px; border-top:4px solid #F39C12;}
footer a {color:#F39C12; text-decoration:underline; margin:0 5px;}

/* ===== Responsive ===== */
@media(max-width:768px){
  #comparisonTable {display:none;}
  #cardWrapper {display:flex;}
  #filters input, #filters select {width:100%; max-width:300px;}
}
</style>
</head>
<body>

<header>
  <div class="logo">
    <img src="images/favicon.png" alt="Buildy Logo"> Buildy
  </div>
  <div class="login">Login</div>
</header>

<nav class="subheader">
  <a href="index.html">Home</a>
  <a href="#">Materials</a>
  <a href="#">Suppliers</a>
  <a href="#">Contact</a>
</nav>

<!-- Filters -->
<div id="filters">
  <input type="text" id="searchBox" placeholder="Search Material">
  <select id="categoryFilter">
    <option value="">All Categories</option>
  </select>
</div>

<!-- Desktop Table -->
<table id="comparisonTable">
  <thead>
    <tr>
      <th>Material</th>
      <th><img src="images/chadwicks-logo.png" alt="Chadwicks"> Chadwicks</th>
      <th><img src="images/tj-omahony-logo.png" alt="TJ O'Mahony"> TJ O'Mahony</th>
      <th><img src="images/woodies-logo.png" alt="Woodie's"> Woodie's</th>
      <th><img src="images/heiton-buckley-logo.png" alt="Heiton Buckley"> Heiton Buckley</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<!-- Mobile Cards -->
<div id="cardWrapper"></div>

<!-- Map -->
<section id="supplierMap"></section>

<footer>
  <p>&copy; 2025 Buildy. All Rights Reserved.</p>
</footer>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
// ===== Materials & Suppliers =====
const materials = [
  {category:"Cement", name:"Cement (25kg)"},{category:"Cement", name:"White Cement (25kg)"},
  {category:"Timber", name:"Timber 2x4 (2.4m)"},{category:"Timber", name:"Plywood Sheet 8x4 (18mm)"},
  {category:"Bricks", name:"Clay Bricks (per 100)"},{category:"Roofing", name:"Roof Tiles (per 100)"},
  {category:"Flooring", name:"Ceramic Tiles (per m²)"},{category:"Paint", name:"Interior Emulsion (5L)"}
];
const suppliers = ["Chadwicks", "TJ O'Mahony", "Woodie's", "Heiton Buckley"];

// Populate category filter
const categorySelect = document.getElementById("categoryFilter");
[...new Set(materials.map(m=>m.category))].forEach(c=>{
  const opt=document.createElement("option"); opt.value=c; opt.text=c; categorySelect.appendChild(opt);
});

// Generate table
function generateTable(filterCategory=""){
  const tbody = document.querySelector("#comparisonTable tbody"); tbody.innerHTML="";
  const filtered = filterCategory ? materials.filter(m=>m.category===filterCategory) : materials;
  filtered.forEach(item=>{
    const prices = suppliers.map(()=> (Math.random()*50+10).toFixed(2));
    const minPrice = Math.min(...prices);
    const row = document.createElement("tr");
    row.innerHTML=`<td>${item.name}</td>` + prices.map(p=>`<td class="${p==minPrice?'highlight':''}">€${p}</td>`).join('');
    tbody.appendChild(row);
  });
}

// Generate cards
function generateCards(filterCategory=""){
  const wrapper=document.getElementById("cardWrapper"); wrapper.innerHTML="";
  const filtered = filterCategory ? materials.filter(m=>m.category===filterCategory) : materials;
  filtered.forEach(item=>{
    const prices = suppliers.map(()=> (Math.random()*50+10).toFixed(2));
    const minPrice = Math.min(...prices);
    const card=document.createElement("div"); card.className="card";
    card.innerHTML=`<h3>${item.name}</h3>` + suppliers.map((s,i)=>`<div class="price-row">${s}: <span class="${prices[i]==minPrice?'highlight':''}">€${prices[i]}</span></div>`).join('');
    wrapper.appendChild(card);
  });
}

// Filter & Search
categorySelect.addEventListener('change',()=>{generateTable(categorySelect.value); generateCards(categorySelect.value);});
document.getElementById("searchBox").addEventListener('input',()=>{
  const query=document.getElementById("searchBox").value.toLowerCase();
  const filtered = materials.filter(m=>m.name.toLowerCase().includes(query));
  generateTableFiltered(filtered);
  generateCardsFiltered(filtered);
});
function generateTableFiltered(filtered){
  const tbody=document.querySelector("#comparisonTable tbody"); tbody.innerHTML="";
  filtered.forEach(item=>{
    const prices=suppliers.map(()=> (Math.random()*50+10).toFixed(2));
    const minPrice=Math.min(...prices);
    const row=document.createElement("tr");
    row.innerHTML=`<td>${item.name}</td>` + prices.map(p=>`<td class="${p==minPrice?'highlight':''}">€${p}</td>`).join('');
    tbody.appendChild(row);
  });
}
function generateCardsFiltered(filtered){
  const wrapper=document.getElementById("cardWrapper"); wrapper.innerHTML="";
  filtered.forEach(item=>{
    const prices=suppliers.map(()=> (Math.random()*50+10).toFixed(2));
    const minPrice=Math.min(...prices);
    const card=document.createElement("div"); card.className="card";
    card.innerHTML=`<h3>${item.name}</h3>` + suppliers.map((s,i)=>`<div class="price-row">${s}: <span class="${prices[i]==minPrice?'highlight':''}">€${prices[i]}</span></div>`).join('');
    wrapper.appendChild(card);
  });
}

// Map
const map = L.map('supplierMap').setView([52.5, -6.5], 7);
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{attribution:'© OpenStreetMap contributors'}).addTo(map);
const supplierData = [
  {name:"Chadwicks", coords:[52.334, -6.457], url:"#"},
  {name:"TJ O'Mahony", coords:[52.321, -6.645], url:"#"},
  {name:"Woodie's", coords:[52.389, -6.580], url:"#"},
  {name:"Heiton Buckley", coords:[52.340, -6.520], url:"#"}
];
supplierData.forEach(s=>{
  L.marker(s.coords).addTo(map).bindPopup(`<b>${s.name}</b><br><a href="${s.url}">Visit Page</a>`);
});

// Initial load
generateTable();
generateCards();
</script>

</body>
</html>
