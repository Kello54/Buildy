<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Buildy - Compare Building Materials</title>
<link rel="icon" href="https://kello54.github.io/Buildy/docs/images/favicon.png" type="image/png">

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

<style>
body { font-family: 'Roboto', sans-serif; background:#ecf0f1; color:#2c3e50; margin:0; }

/* ===== Header ===== */
header {
  position: sticky;
  top:0;
  background:#f1f3f6;
  color:#2c3e50;
  padding:15px 30px;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:1.8em;
  font-weight:bold;
  z-index:1000;
  box-shadow:0 2px 5px rgba(0,0,0,0.05);
}
header .logo img { height:40px; margin-right:12px; }

/* ===== Sub-header navigation ===== */
.sub-header {
  background:#ffffff;
  display:flex;
  justify-content:center;
  gap:30px;
  padding:12px 0;
  overflow-x:auto;
}
.sub-header a {
  text-decoration:none;
  color:#2980b9;
  font-weight:500;
  font-size:1em;
  padding:5px 8px;
  border-radius:5px;
  transition:0.3s;
}
.sub-header a:hover { background:#d6eaf8; color:#1c5980; }

/* ===== Hero Section ===== */
.hero { text-align:center; padding:60px 20px; background:#ecf0f1; }
.hero h1 { font-size:2em; margin-bottom:15px; color:#2c3e50; }
.hero p { font-size:1em; margin-bottom:20px; }
.hero input, .hero select, .hero button {
  padding:10px 12px; font-size:1em; margin:5px; border-radius:5px; border:1px solid #ccc;
}
.hero button {
  background:#2980b9; color:#ffffff; border:none; cursor:pointer; transition:0.3s;
}
.hero button:hover { background:#1c5980; }

/* ===== Materials Table ===== */
.comparison { width:90%; max-width:1200px; margin:20px auto; overflow-x:auto; }
table { width:100%; border-collapse:collapse; background:#ffffff; box-shadow:0 2px 8px rgba(0,0,0,0.05); }
th, td { padding:14px; text-align:center; border-bottom:1px solid #ddd; }
th { background:#2980b9; color:#ffffff; cursor:pointer; }
tr:hover { background:#f1f1f1; }
.cheapest { background:#d4efdf; color:#155724; font-weight:bold; }
.overall-cheapest { border:2px solid #1c5980; }
tr.category-header td { text-align:left; font-weight:bold; background:#d6eaf8; color:#2980b9; padding:15px; }

/* ===== Material Cards ===== */
.material-cards { display:none; padding:20px; gap:15px; flex-wrap:wrap; justify-content:center; }
.material-card {
  background:#ffffff; padding:15px; border-radius:10px; box-shadow:0 3px 12px rgba(0,0,0,0.08);
  width:250px; transition:0.3s; display:flex; flex-direction:column; align-items:center;
}
.material-card:hover { transform:translateY(-5px); }
.material-card h3 { margin:10px 0 5px; color:#2980b9; font-size:1.1em; }
.material-card p { font-size:0.9em; margin:3px 0; }
.material-card .price { font-weight:700; color:#27ae60; }
.material-card button {
  margin-top:10px; padding:8px 12px; border:none; background:#2980b9; color:#ffffff; border-radius:5px; cursor:pointer; transition:0.3s;
}
.material-card button:hover { background:#1c5980; }

/* ===== Features Section ===== */
.features { display:flex; flex-wrap:wrap; justify-content:center; gap:30px; padding:40px 20px; text-align:center; }
.feature { background:#ffffff; padding:25px; border-radius:12px; box-shadow:0 3px 12px rgba(0,0,0,0.08); width:220px; transition:0.3s; }
.feature:hover { transform:translateY(-5px); }
.feature h3 { margin-bottom:12px; color:#2980b9; }

/* ===== Footer ===== */
footer { background:#2c3e50; color:#ffffff; text-align:center; padding:20px; font-size:0.9em; }
footer a { color:#ffffff; margin-right:12px; text-decoration:none; }
footer a:hover { text-decoration:underline; }

/* ===== Responsive ===== */
@media(max-width:768px){
  table, thead, tbody, th, td, tr { display:none; }
  .material-cards { display:flex; }
}

/* Hidden table when card view is active */
.table-view-hidden { display:none !important; }
</style>
</head>
<body>

<header>
  <div class="logo">
    <img src="https://kello54.github.io/Buildy/docs/images/logo.png" alt="Buildy Logo"> Buildy
  </div>
</header>

<nav class="sub-header">
  <a href="#">Home</a>
  <a href="#">Compare Materials</a>
  <a href="#">Suppliers</a>
</nav>

<section class="hero">
  <h1>Compare Building Materials Instantly</h1>
  <p>Quickly find the cheapest prices across multiple suppliers</p>
  <input type="text" id="searchInput" placeholder="Enter material...">
  <select id="categoryFilter">
    <option value="">All Categories</option>
    <option value="Cement">Cement</option>
    <option value="Lumber">Lumber</option>
    <option value="Bricks">Bricks</option>
  </select>
  <button id="downloadCSV">Download CSV</button>
  <button id="toggleView">Switch to Cards View</button>
</section>

<section class="comparison">
  <table id="materialsTable">
    <thead>
      <tr id="tableHeader"></tr>
    </thead>
    <tbody id="tableBody"></tbody>
  </table>
  <div class="material-cards" id="materialCards"></div>
</section>

<section class="features">
  <div class="feature">
    <h3>Select Material</h3>
    <p>Search or browse materials you need to purchase.</p>
  </div>
  <div class="feature">
    <h3>Compare Prices</h3>
    <p>See prices from multiple suppliers at a glance.</p>
  </div>
  <div class="feature">
    <h3>Choose Supplier</h3>
    <p>Select the cheapest or most convenient supplier for your order.</p>
  </div>
</section>

<footer>
  &copy; 2025 Buildy | Compare building materials quickly and easily
  <div style="margin-top:10px;">
    <a href="#">About</a>
    <a href="#">Contact</a>
  </div>
</footer>

<script>
// Data
const suppliers = ["Supplier 1","Supplier 2","Supplier 3","Supplier 4","Supplier 5"];
const materials = [
  { category: "Cement", name: "Cement (50kg)", prices: [7.50, 8.00, 7.80, 8.20, 7.90] },
  { category: "Cement", name: "Cement (25kg)", prices: [4.00, 4.10, 4.05, 4.20, 4.15] },
  { category: "Lumber", name: "Lumber (2x4)", prices: [3.50, 3.20, 3.40, 3.60, 3.55] },
  { category: "Lumber", name: "Lumber (4x4)", prices: [5.00, 4.80, 5.10, 5.20, 4.90] },
  { category: "Bricks", name: "Bricks (per 100)", prices: [25.00, 24.50, 24.00, 24.80, 25.20] }
];

// Elements
const tableHeader = document.getElementById("tableHeader");
const tableBody = document.getElementById("tableBody");
const materialCards = document.getElementById("materialCards");
const searchInput = document.getElementById("searchInput");
const categoryFilter = document.getElementById("categoryFilter");
const toggleButton = document.getElementById("toggleView");
const materialsTable = document.getElementById("materialsTable");

// Create Table Header
function createHeader() {
  tableHeader.innerHTML = "";
  const thMaterial = document.createElement("th");
  thMaterial.textContent = "Material";
  thMaterial.addEventListener("click", ()=>sortTable("name"));
  tableHeader.appendChild(thMaterial);
  suppliers.forEach((s,index)=>{
    const th = document.createElement("th");
    th.textContent = s;
    th.addEventListener("click", ()=>sortTable(index));
    tableHeader.appendChild(th);
  });
}

// Sorting
let sortOrder = {};
function sortTable(column){
  let filtered = getFilteredMaterials();
  if(column==="name"){
    sortOrder[column] = sortOrder[column]==="asc"?"desc":"asc";
    filtered.sort((a,b)=>sortOrder[column]==="asc"?a.name.localeCompare(b.name):b.name.localeCompare(a.name));
  } else {
    sortOrder[column] = sortOrder[column]==="asc"?"desc":"asc";
    filtered.sort((a,b)=>sortOrder[column]==="asc"?a.prices[column]-b.prices[column]:b.prices[column]-a.prices[column]);
  }
  generateTable(filtered);
}

// Filter Materials
function getFilteredMaterials(){
  const search = searchInput.value.toLowerCase();
  const category = categoryFilter.value;
  return materials.filter(m=>m.name.toLowerCase().includes(search) && (category==="" || m.category===category));
}

// Generate Table & Cards
function generateTable(filtered){
  tableBody.innerHTML="";
  materialCards.innerHTML="";
  filtered.forEach(m=>{
    // Table Row
    const tr = document.createElement("tr");
    const tdName = document.createElement("td");
    tdName.textContent = m.name;
    tr.appendChild(tdName);
    m.prices.forEach(p=>{
      const td = document.createElement("td");
      td.textContent = p.toFixed(2);
      tr.appendChild(td);
    });
    tableBody.appendChild(tr);
    // Card View
    const card = document.createElement("div");
    card.className="material-card";
    card.innerHTML=`<h3>${m.name}</h3>
      <p>Category: ${m.category}</p>
      ${m.prices.map((p,i)=>`<p>${suppliers[i]}: â‚¬${p.toFixed(2)}</p>`).join('')}
      <button>Compare Prices</button>`;
    materialCards.appendChild(card);
  });
}

// CSV Export
document.getElementById("downloadCSV").addEventListener("click", () => {
  const filtered = getFilteredMaterials();
  let csvContent = "Material,Category," + suppliers.join(",") + "\n";
  filtered.forEach(m => {
    csvContent += [m.name, m.category, ...m.prices.map(p => p.toFixed(2))].join(",") + "\n";
  });
  const blob = new Blob([csvContent], { type: "text/csv;charset=utf-8;" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = "buildy_materials.csv";
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
});

// Event Listeners
searchInput.addEventListener("input", ()=>generateTable(getFilteredMaterials()));
categoryFilter.addEventListener("change", ()=>generateTable(getFilteredMaterials()));

// Toggle Table/Card View
let isCardView = false;
toggleButton.addEventListener("click", () => {
  isCardView = !isCardView;
  if(isCardView){
    materialsTable.classList.add("table-view-hidden");
    materialCards.style.display = "flex";
    toggleButton.textContent = "Switch to Table View";
  } else {
    materialsTable.classList.remove("table-view-hidden");
    materialCards.style.display = "none";
    toggleButton.textContent = "Switch to Cards View";
  }
});

// Initial Render
createHeader();
generateTable(materials);
</script>
</body>
</html>
