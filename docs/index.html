<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Buildy - Compare Building Materials</title>
<link rel="icon" href="https://kello54.github.io/Buildy/docs/images/favicon.png" type="image/png">
<style>
body { font-family: Arial, sans-serif; background:#f8f9fa; color:#333; margin:0; }

/* --- Header --- */
header {
  background:#ffffff;
  padding:15px 40px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  border-bottom:1px solid #eee;
}
header .logo { height:40px; margin-right:10px; }
.brand-name { font-size:1.5em; font-weight:bold; color:#4b3c7a; }
.header-left { display:flex; align-items:center; }
.header-right button {
  background:#4b3c7a; color:#fff; border:none;
  padding:8px 16px; border-radius:6px; cursor:pointer;
  transition:background 0.3s;
}
.header-right button:hover { background:#362b5c; }

/* --- Sub-header --- */
.sub-header {
  background:#f7f7f7;
  display:flex;
  justify-content:center;
  gap:40px;
  padding:12px 0;
  border-bottom:1px solid #eee;
}
.sub-header a {
  text-decoration:none; color:#4b3c7a; font-weight:500; font-size:1.05em;
}
.sub-header a:hover { color:#362b5c; }

/* --- Hero Section --- */
.hero { text-align:center; padding:100px 20px; background:#faf7ff; }
.hero h1 { font-size:2.2em; margin-bottom:20px; color:#4b3c7a; }
.hero p { font-size:1.1em; margin-bottom:25px; }
.hero input, .hero button {
  padding:10px 15px; font-size:1em; margin:5px; border-radius:5px; border:1px solid #ccc;
}
.hero button { background:#4b3c7a; color:#fff; border:none; cursor:pointer; }
.hero button:hover { background:#362b5c; }

/* --- Comparison Table --- */
.comparison { width:90%; max-width:1200px; margin:50px auto; overflow-x:auto; }
table { width:100%; border-collapse:collapse; background:#fff; box-shadow:0 2px 8px rgba(0,0,0,0.05); }
th, td { padding:18px; text-align:center; border-bottom:1px solid #ddd; }
th { background:#eae4f6; color:#4b3c7a; cursor:pointer; }
tr:hover { background:#f9f9f9; }
.cheapest { background:#d4edda; color:#155724; font-weight:bold; }
.overall-cheapest { border:2px solid #4b3c7a; }
tr.category-header td {
  text-align:left; font-weight:bold;
  background:#f0ebfa; color:#4b3c7a;
  padding-top:20px; padding-bottom:20px;
}

/* --- Features --- */
.features { display:flex; flex-wrap:wrap; justify-content:center; gap:40px; padding:60px 20px; text-align:center; }
.feature { background:#fff; padding:35px 25px; border-radius:12px; box-shadow:0 3px 12px rgba(0,0,0,0.08); width:260px; transition:transform 0.3s; }
.feature:hover { transform:translateY(-5px); }
.feature h3 { margin-bottom:15px; color:#4b3c7a; }

/* --- Footer --- */
footer { background:#4b3c7a; color:#fff; text-align:center; padding:20px; margin-top:50px; font-size:0.9em; }
footer a { color:#fff; margin-right:15px; text-decoration:none; }
footer a:hover { text-decoration:underline; }

/* --- Login Modal --- */
.modal {
  display:none; position:fixed; z-index:1000; left:0; top:0;
  width:100%; height:100%; background:rgba(0,0,0,0.5);
  justify-content:center; align-items:center;
}
.modal-content {
  background:#fff; padding:30px; border-radius:10px; width:300px; text-align:center;
  box-shadow:0 5px 15px rgba(0,0,0,0.2);
}
.modal-content h2 { margin-bottom:20px; color:#4b3c7a; }
.modal-content input {
  width:90%; padding:10px; margin:10px 0;
  border:1px solid #ccc; border-radius:6px;
}
.modal-content button {
  background:#4b3c7a; color:#fff; border:none; padding:10px 20px;
  border-radius:6px; cursor:pointer; margin-top:10px;
}
.modal-content button:hover { background:#362b5c; }

/* --- Dashboard --- */
#dashboard { display:none; padding:40px; text-align:center; }
#dashboard h2 { color:#4b3c7a; margin-bottom:20px; }

/* --- Responsive --- */
@media(max-width:768px){
  .features { flex-direction:column; align-items:center; }
  .header-left .brand-name { font-size:1.2em; }
}
</style>
</head>
<body>

<!-- HEADER -->
<header>
  <div class="header-left">
    <img src="https://kello54.github.io/Buildy/docs/images/logo.png" alt="Buildy Logo" class="logo">
    <span class="brand-name">Buildy</span>
  </div>
  <div class="header-right">
    <button id="loginBtn">Login</button>
  </div>
</header>

<!-- SUB-HEADER -->
<nav class="sub-header">
  <a href="#">Home</a>
  <a href="#">Compare Materials</a>
  <a href="#">Suppliers</a>
</nav>

<!-- HERO -->
<section class="hero">
  <h1>Compare Building Materials Instantly</h1>
  <p>Quickly find the cheapest prices across multiple suppliers</p>
  <input type="text" id="searchInput" placeholder="Enter material...">
  <button id="downloadCSV">Download CSV</button>
</section>

<!-- COMPARISON TABLE -->
<section class="comparison">
  <table id="materialsTable">
    <thead>
      <tr id="tableHeader"></tr>
    </thead>
    <tbody id="tableBody"></tbody>
  </table>
</section>

<!-- FEATURES -->
<section class="features">
  <div class="feature"><h3>Select Material</h3><p>Search or browse materials you need to purchase.</p></div>
  <div class="feature"><h3>Compare Prices</h3><p>See prices from multiple suppliers at a glance.</p></div>
  <div class="feature"><h3>Choose Supplier</h3><p>Select the cheapest or most convenient supplier for your order.</p></div>
</section>

<!-- DASHBOARD -->
<section id="dashboard">
  <h2>Welcome to your Dashboard</h2>
  <p>Here you can manage saved comparisons, orders, and account settings.</p>
</section>

<!-- FOOTER -->
<footer>
  &copy; 2025 Buildy | Compare building materials quickly and easily
  <div style="margin-top:10px;">
    <a href="#">About</a>
    <a href="#">Contact</a>
  </div>
</footer>

<!-- LOGIN MODAL -->
<div id="loginModal" class="modal">
  <div class="modal-content">
    <h2>Login</h2>
    <input type="text" id="email" placeholder="Email">
    <input type="password" id="password" placeholder="Password">
    <button id="submitLogin">Login</button>
    <br>
    <button id="closeModal" style="margin-top:15px;background:#ccc;color:#333;">Cancel</button>
  </div>
</div>

<script>
/* === Sample Data === */
const suppliers = ["Supplier 1","Supplier 2","Supplier 3","Supplier 4","Supplier 5"];
const materials = [
  { category: "Cement", name: "Cement (50kg)", prices: [7.50, 8.00, 7.80, 8.20, 7.90] },
  { category: "Cement", name: "Cement (25kg)", prices: [4.00, 4.10, 4.05, 4.20, 4.15] },
  { category: "Lumber", name: "Lumber (2x4)", prices: [3.50, 3.20, 3.40, 3.60, 3.55] },
  { category: "Lumber", name: "Lumber (4x4)", prices: [5.00, 4.80, 5.10, 5.20, 4.90] },
  { category: "Bricks", name: "Bricks (per 100)", prices: [25.00, 24.50, 24.00, 24.80, 25.20] }
];

const tableHeader = document.getElementById("tableHeader");
const tableBody = document.getElementById("tableBody");
const searchInput = document.getElementById("searchInput");

/* === Table Generation === */
function createHeader() {
  tableHeader.innerHTML = "";
  const thMaterial = document.createElement("th");
  thMaterial.textContent = "Material";
  thMaterial.addEventListener("click", () => sortTable("name"));
  tableHeader.appendChild(thMaterial);

  suppliers.forEach((s,index)=>{
    const th = document.createElement("th");
    th.textContent = s;
    th.addEventListener("click",()=>sortTable(index));
    tableHeader.appendChild(th);
  });
}

let sortOrder = {};
function sortTable(column){
  let filtered = materials.filter(m => m.name.toLowerCase().includes(searchInput.value.toLowerCase()));
  if(column === "name"){
    sortOrder[column] = sortOrder[column]==="asc" ? "desc":"asc";
    filtered.sort((a,b)=>sortOrder[column]==="asc" ? a.name.localeCompare(b.name):b.name.localeCompare(a.name));
  } else {
    sortOrder[column] = sortOrder[column]==="asc" ? "desc":"asc";
    filtered.sort((a,b)=>sortOrder[column]==="asc"? a.prices[column]-b.prices[column]: b.prices[column]-a.prices[column]);
  }
  generateTable(filtered);
}

function highlightCheapest(row, prices){
  let minPrice = Math.min(...prices);
  Array.from(row.cells).forEach((cell,index)=>{
    cell.classList.remove("cheapest","overall-cheapest");
    if(index>0 && parseFloat(cell.textContent)===minPrice) cell.classList.add("cheapest");
  });
}

function highlightOverallCheapest(filteredMaterials){
  let supplierTotals = suppliers.map((_,i)=> filteredMaterials.reduce((sum,m)=>sum+m.prices[i],0));
  let minTotal = Math.min(...supplierTotals);
  let cheapestIndex = supplierTotals.indexOf(minTotal);
  Array.from(tableBody.rows).forEach(row=>{
    if(!row.classList.contains("category-header"))
      row.cells[cheapestIndex+1].classList.add("overall-cheapest");
  });
}

function generateTable(filteredMaterials){
  tableBody.innerHTML="";
  const categories = [...new Set(filteredMaterials.map(m=>m.category))];
  categories.forEach(category=>{
    let catRow = document.createElement("tr");
    catRow.classList.add("category-header");
    let td = document.createElement("td");
    td.colSpan = suppliers.length+1;
    td.textContent = category;
    catRow.appendChild(td);
    tableBody.appendChild(catRow);

    filteredMaterials.filter(m=>m.category===category).forEach(m=>{
      let row = document.createElement("tr");
      let tdName = document.createElement("td");
      tdName.textContent = m.name;
      row.appendChild(tdName);
      m.prices.forEach(p=>{
        let td = document.createElement("td");
        td.textContent = p.toFixed(2);
        row.appendChild(td);
      });
      highlightCheapest(row,m.prices);
      tableBody.appendChild(row);
    });
  });
  highlightOverallCheapest(filteredMaterials);
}

searchInput.addEventListener("input", ()=>generateTable(materials.filter(m => m.name.toLowerCase().includes(searchInput.value.toLowerCase()))));

createHeader();
generateTable(materials);

/* === Login Modal & State === */
const loginBtn = document.getElementById("loginBtn");
const loginModal = document.getElementById("loginModal");
const closeModal = document.getElementById("closeModal");
const submitLogin = document.getElementById("submitLogin");
const dashboard = document.getElementById("dashboard");
const hero = document.querySelector(".hero");
const comparison = document.querySelector(".comparison");
const features = document.querySelector(".features");

loginBtn.addEventListener("click", ()=>{
  if(loginBtn.textContent === "Login"){
    loginModal.style.display="flex";
  } else {
    // Show dashboard
    hero.style.display="none";
    comparison.style.display="none";
    features.style.display="none";
    dashboard.style.display="block";
  }
});

closeModal.addEventListener("click", ()=> loginModal.style.display="none");

submitLogin.addEventListener("click", ()=>{
  const email = document.getElementById("email").value;
  const password = document.getElementById("password").value;
  if(email && password){
    loginModal.style.display="none";
    loginBtn.textContent="Dashboard";
    const logoutBtn = document.createElement("button");
    logoutBtn.textContent="Logout";
    logoutBtn.style.marginLeft="10px";
    logoutBtn.addEventListener("click",()=>{
      loginBtn.textContent="Login";
      dashboard.style.display="none";
      hero.style.display="block";
      comparison.style.display="block";
      features.style.display="flex";
      logoutBtn.remove();
    });
    loginBtn.parentNode.appendChild(logoutBtn);
  } else {
    alert("Enter email and password!");
  }
});
</script>
</body>
</html>
