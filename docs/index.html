<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Buildy - Price Comparison</title>
<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background-color: #f5f5f5;
    margin: 0;
    padding: 0 20px;
  }

  h2 {
    text-align: center;
    color: #4b0082;
    margin-top: 40px;
    font-size: 2rem;
  }

  /* Filters */
  .filters {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin: 20px 0;
    flex-wrap: wrap;
  }

  .filters input, .filters select {
    padding: 8px 12px;
    border-radius: 6px;
    border: 1.5px solid gold;
    font-size: 1rem;
    outline: none;
    transition: all 0.3s ease;
  }

  .filters input:focus, .filters select:focus {
    border-color: #4b0082;
    box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  }

  /* Table container */
  .table-container {
    overflow-x: auto;
    margin-bottom: 60px;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    min-width: 800px;
  }

  th, td {
    padding: 12px 15px;
    text-align: center;
  }

  thead th {
    position: sticky;
    top: 0;
    background-color: #4b0082;
    color: #fff;
    cursor: pointer;
    z-index: 1;
  }

  tbody tr:nth-child(even) {
    background-color: #f8f5ff;
  }

  tbody tr:hover {
    background-color: #f0e6ff;
    box-shadow: 0 3px 6px rgba(0,0,0,0.08);
  }

  .best-price {
    background-color: gold;
    color: #4b0082;
    font-weight: bold;
    border-radius: 4px;
  }

  td.total-price {
    position: sticky;
    right: 0;
    background-color: inherit;
  }

  @media(max-width:768px){
    table {
      min-width: 600px;
    }
  }
</style>
</head>
<body>

<h2>Buildy Price Comparison</h2>

<div class="filters">
  <input type="text" id="productFilter" placeholder="Filter by product" onkeyup="filterTable()">
  <input type="text" id="supplierFilter" placeholder="Filter by supplier" onkeyup="filterTable()">
</div>

<div class="table-container">
  <table id="priceTable">
    <thead>
      <tr>
        <th onclick="sortTable(0)">Supplier ▲▼</th>
        <th onclick="sortTable(1)">Product ▲▼</th>
        <th onclick="sortTable(2)">Unit Price ▲▼</th>
        <th onclick="sortTable(3)">VAT ▲▼</th>
        <th onclick="sortTable(4)">Delivery Fee ▲▼</th>
        <th>Total Price</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Supplier A</td>
        <td>Cement 50kg</td>
        <td>7.50</td>
        <td>1.50</td>
        <td>2.00</td>
        <td class="total-price"></td>
      </tr>
      <tr>
        <td>Supplier B</td>
        <td>Cement 50kg</td>
        <td>7.80</td>
        <td>1.56</td>
        <td>1.50</td>
        <td class="total-price"></td>
      </tr>
      <tr>
        <td>Supplier C</td>
        <td>Cement 50kg</td>
        <td>7.20</td>
        <td>1.44</td>
        <td>2.50</td>
        <td class="total-price"></td>
      </tr>
      <tr>
        <td>Supplier A</td>
        <td>Bricks Pack</td>
        <td>3.50</td>
        <td>0.70</td>
        <td>1.00</td>
        <td class="total-price"></td>
      </tr>
      <tr>
        <td>Supplier B</td>
        <td>Bricks Pack</td>
        <td>3.60</td>
        <td>0.72</td>
        <td>0.90</td>
        <td class="total-price"></td>
      </tr>
      <tr>
        <td>Supplier C</td>
        <td>Bricks Pack</td>
        <td>3.50</td>
        <td>0.70</td>
        <td>1.20</td>
        <td class="total-price"></td>
      </tr>
    </tbody>
  </table>
</div>

<script>
// Calculate totals and highlight best prices
function calculateTotals() {
  const table = document.getElementById('priceTable');
  const tbody = table.tBodies[0];
  const rows = Array.from(tbody.rows);
  const products = {};

  rows.forEach(row => {
    const unit = parseFloat(row.cells[2].textContent);
    const vat = parseFloat(row.cells[3].textContent);
    const delivery = parseFloat(row.cells[4].textContent);
    const total = parseFloat((unit + vat + delivery).toFixed(2));
    row.cells[5].textContent = total.toFixed(2);
    row.cells[5].classList.remove('best-price');

    const productName = row.cells[1].textContent;
    if (!products[productName]) products[productName] = [];
    products[productName].push({ row, total });
  });

  // Highlight best prices, including ties
  Object.values(products).forEach(productRows => {
    const min = Math.min(...productRows.map(r => r.total));
    productRows.forEach(r => {
      if (r.total === min) r.row.cells[5].classList.add('best-price');
    });
  });
}

// Sort table columns
function sortTable(n) {
  const table = document.getElementById('priceTable');
  const tbody = table.tBodies[0];
  let rows = Array.from(tbody.rows);
  const asc = table.getAttribute('data-sort-' + n) !== 'asc';
  rows.sort((a,b) => {
    let valA = a.cells[n].textContent;
    let valB = b.cells[n].textContent;
    if (!isNaN(valA) && !isNaN(valB)) {
      valA = parseFloat(valA); valB = parseFloat(valB);
    }
    return (valA > valB ? 1 : -1) * (asc ? 1 : -1);
  });
  rows.forEach(r => tbody.appendChild(r));
  table.setAttribute('data-sort-' + n, asc ? 'asc' : 'desc');
  calculateTotals();
}

// Filter table by supplier/product
function filterTable() {
  const supplierFilter = document.getElementById('supplierFilter').value.toLowerCase();
  const productFilter = document.getElementById('productFilter').value.toLowerCase();
  const tbody = document.getElementById('priceTable').tBodies[0];
  Array.from(tbody.rows).forEach(row => {
    const supplier = row.cells[0].textContent.toLowerCase();
    const product = row.cells[1].textContent.toLowerCase();
    row.style.display = (supplier.includes(supplierFilter) && product.includes(productFilter)) ? '' : 'none';
  });
  calculateTotals();
}

// Initialize
calculateTotals();
</script>

</body>
</html>
    
    
