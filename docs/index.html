<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Buildy - No.1 Building Material Price Comparison</title>
<link rel="icon" href="https://kello54.github.io/Buildy/docs/images/favicon.png" type="image/png">

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

<!-- SheetJS for Excel export -->
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

<style>
* {margin:0; padding:0; box-sizing:border-box; font-family:Arial, sans-serif;}
body {min-height:100vh; display:flex; flex-direction:column; color:#fff; background:url("https://kello54.github.io/Buildy/docs/images/construction-bg.jpg") center/cover no-repeat fixed;}
body::before {content:""; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(46,26,71,0.15); z-index:-1;}
a {text-decoration:none; color:inherit;}

/* Header */
header {background: #2e1a47; padding:15px 40px; display:flex; justify-content:space-between; align-items:center; border-bottom:4px solid gold;}
header .logo {display:flex; align-items:center; gap:10px; font-size:24px; font-weight:bold; color:#fff;}
header .logo img {height:40px;}
header .login {color:#fff; font-size:16px; cursor:pointer; padding:6px 12px; border:1px solid rgba(255,215,0,0.3); border-radius:4px; transition:0.2s;}
header .login:hover {background: rgba(255,215,0,0.2);}

/* Subheader */
nav.subheader {background:#3c245c; display:flex; justify-content:center; padding:10px 0; border-bottom:2px solid gold;}
nav.subheader a {color:#fff; text-decoration:none; padding:0 20px; font-size:16px; position:relative;}
nav.subheader a:not(:last-child)::after {content:""; position:absolute; right:0; top:50%; transform:translateY(-50%); width:2px; height:20px; background:gold;}

/* Hero */
.hero {
  text-align:center;
  padding:80px 20px 60px;
  /* Lightened overlay for better background visibility */
  background: linear-gradient(rgba(46,26,71,0.15), rgba(46,26,71,0.05)),
              url("https://kello54.github.io/Buildy/docs/images/construction-bg.jpg") center/cover no-repeat fixed;
  color: #fff;
}
.hero h1 {
  font-size:36px;
  margin-bottom:20px;
  animation: fadeInDown 1.2s ease-out;
  text-shadow: 1px 1px 6px rgba(0,0,0,0.5);
}
@keyframes fadeInDown {0%{opacity:0; transform:translateY(-30px);}100%{opacity:1; transform:translateY(0);}}
.hero input {padding:10px; width:300px; max-width:90%; border-radius:5px; border:1px solid gold;}
.hero button, #heroCTA {padding:10px 20px; margin-left:10px; background:gold; border:none; border-radius:5px; cursor:pointer; font-weight:bold; color:#2e1a47;}
#heroCTA {display:inline-block; margin-top:15px; transition: background 0.3s;}
#heroCTA:hover {background:#e6c200;}

/* Layout */
.layout {display:grid; grid-template-columns:380px 1fr; gap:18px; padding:20px;}
.card {background: rgba(46,26,71,0.9); border-radius:8px; padding:15px; color:#fff; box-shadow:0 6px 18px rgba(12,24,60,0.06);}
.card h3 {margin-bottom:10px; border-bottom:1px solid gold; padding-bottom:4px;}

/* Form */
form .row {display:flex; gap:8px; margin-bottom:8px;}
label {font-size:12px; color:#ddd;}
input[type="text"], input[type="number"], input[type="date"], select {width:100%; padding:8px; border-radius:6px; border:1px solid #eee; background:transparent; color:#fff;}
button {padding:8px 12px; border-radius:8px; border:0; cursor:pointer; background:gold; color:#2e1a47; font-weight:600; transition:0.2s;}
button:hover {opacity:0.9;}
button.ghost {background:transparent; color:gold; border:1px solid gold;}
button.small {padding:6px 8px; font-size:13px;}

/* Entries Table */
table {width:100%; border-collapse:collapse; font-size:13px; margin-top:10px; color:#fff;}
thead th {text-align:left; padding:8px 6px; color:gold; border-bottom:1px solid #eee;}
tbody td {padding:8px 6px; border-bottom:1px solid rgba(255,255,255,0.2);}
tbody tr:hover {background:rgba(255,255,255,0.1);}
td.cheapest {background:#1fa05a; color:#fff; font-weight:700;}

/* Comparison Table */
.comparison-table {width:100%; border-collapse:collapse; margin-top:15px;}
.comparison-table th, .comparison-table td {border:1px solid #ddd; padding:12px; text-align:center; vertical-align: middle;}
.comparison-table th img {height:36px; margin-bottom:4px;}

/* Collapsible categories */
.category-row {background:#3c245c; color:#fff; font-weight:bold; cursor:pointer; transition: background 0.3s;}
.category-row:hover {background:#4b2a7a;}
.material-row {transition:0.3s;}

/* Cards Scroll */
#cardWrapper {display:flex; overflow-x:auto; gap:10px; padding:20px 0; scroll-behavior:smooth;}
.card {min-width:220px; flex-shrink:0; transition:transform 0.3s;}
.card:hover {transform:translateY(-5px);}

/* Map */
#supplierMap {height:300px; border:2px solid gold; border-radius:5px; margin-top:20px;}

/* Scroll-to-top */
#scrollTopBtn {display:none; position:fixed; bottom:30px; right:30px; z-index:100; background:gold; color:#2e1a47; border:none; border-radius:50%; padding:12px 16px; cursor:pointer; font-size:18px; box-shadow:0 4px 6px rgba(0,0,0,0.3);}
#scrollTopBtn:hover {background:#e6c200;}

/* Footer */
footer {background:#2e1a47; color:#fff; text-align:center; padding:20px; border-top:4px solid gold;}
footer a {color: gold; text-decoration: underline;}
</style>
</head>
<body>

<header>
  <div class="logo"><img src="https://kello54.github.io/Buildy/docs/images/favicon.png" alt="Logo"> Buildy</div>
  <div class="login">Login</div>
</header>

<nav class="subheader">
  <a href="#">Home</a><a href="#">Materials</a><a href="#">Suppliers</a><a href="#">Contact</a>
</nav>

<div class="hero">
  <h1>Compare Building Material Prices Instantly</h1>
  <input type="text" id="searchBox" placeholder="Search material...">
  <button onclick="searchMaterials()">Search</button>
  <div id="heroCTA">Get Started</div>
</div>

<div class="layout">
  <!-- Left Column: Form + Entries -->
  <div class="card">
    <h3>Add / Update Material</h3>
    <form id="priceForm">
      <input type="hidden" id="entryId">
      <div class="row">
        <div style="flex:1">
          <label>Material</label>
          <input type="text" id="material" required>
        </div>
        <div style="width:140px">
          <label>Supplier</label>
          <select id="supplier"></select>
        </div>
      </div>
      <div class="row">
        <div style="width:140px">
          <label>Category</label>
          <select id="categorySelect">
            <option value="Cement">Cement</option>
            <option value="Timber">Timber</option>
            <option value="Bricks">Bricks</option>
            <option value="Roofing">Roofing</option>
            <option value="Flooring">Flooring</option>
            <option value="Paint">Paint</option>
            <option value="Pipes">Pipes</option>
            <option value="Electrical">Electrical</option>
            <option value="Hardware">Hardware</option>
            <option value="Insulation">Insulation</option>
            <option value="Plaster">Plaster</option>
            <option value="Steel">Steel</option>
            <option value="Tools">Tools</option>
            <option value="Garden">Garden</option>
          </select>
        </div>
        <div style="width:100px">
          <label>Price (€)</label>
          <input type="number" step="0.01" id="price" required>
        </div>
        <div style="width:120px">
          <label>Date</label>
          <input type="date" id="date">
        </div>
      </div>
      <button type="submit" id="saveBtn">Save</button>
      <button type="button" id="cancelEdit" class="ghost small">Cancel</button>
    </form>

    <div style="margin-top:10px;">
      <button id="exportExcelBtn">Export Excel</button>
      <button id="exportJSONBtn">Export JSON</button>
      <button id="importJSONBtn">Import JSON</button>
      <button id="clearAllBtn" class="ghost small">Clear All</button>
    </div>

    <div id="statsArea" style="margin-top:10px;"></div>

    <table id="entriesTable">
      <thead><tr><th>Material</th><th>Supplier</th><th>Price</th><th>Date</th><th>Actions</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- Right Column: Comparison + Cards + Map -->
  <div>
    <h3>Supplier Comparison</h3>
    <table class="comparison-table" id="comparisonTable">
      <thead>
        <tr>
          <th>Material</th>
          <th><img src="https://kello54.github.io/Buildy/docs/images/chadwicks-logo.png" alt="Chadwicks"><br>Chadwicks</th>
          <th><img src="https://kello54.github.io/Buildy/docs/images/tj-omahony-logo.png" alt="TJ O'Mahony"><br>TJ O'Mahony</th>
          <th><img src="https://kello54.github.io/Buildy/docs/images/woodies-logo.png" alt="Woodie's"><br>Woodie's</th>
          <th><img src="https://kello54.github.io/Buildy/docs/images/heiton-buckley-logo.png" alt="Heiton Buckley"><br>Heiton Buckley</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>

    <div id="cardWrapper"></div>
    <canvas id="trendChart" class="card" style="margin-top:15px;"></canvas>
    <div id="supplierMap"></div>
  </div>
</div>

<button id="scrollTopBtn" title="Go to top">↑</button>

<footer>
  <p>Suppliers: <a href="#">Chadwicks</a>, <a href="#">TJ O'Mahony</a>, <a href="#">Woodie's</a>, <a href="#">Heiton Buckley</a></p>
  <p>Contact: <a href="tel:+35312345678">+353 12 345678</a> | <a href="mailto:info@buildy.com">info@buildy.com</a></p>
  <p>&copy; 2025 Buildy. All Rights Reserved.</p>
</footer>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
// ===== JavaScript code for entries, comparison, cards, search, trend chart, map, scroll-top, export/import =====
// (Same as previous detailed script: form handling, renderEntries(), renderComparison(), renderCards(), renderTrendOptions(), map initialization, scroll-to-top, export/import)
</script>

</body>
</html>
